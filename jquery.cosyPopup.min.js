/**
 * cosyPopup
 * @author Jan Ebsen <xicrow@gmail.com>
 * @version 1.0.0
 * @date 2014-02-06
 * @copyright Jan Ebsen 2014
 */
(function(a){a.cosyPopup={elmPopup:null,isVisible:!1,posVer:"above",posHor:"right",timeShow:250,timeHide:150,cache:{data:{},get:function(c){return a.cosyPopup.cache.data[c]},set:function(c,d,b){a.cosyPopup.cache.remove(c);a.cosyPopup.cache.data[c]=d;a.isFunction(b)&&b(d)},remove:function(c){delete a.cosyPopup.cache.data[c]},exist:function(c){return a.cosyPopup.cache.data.hasOwnProperty(c)&&null!==a.cosyPopup.cache.data[c]}},init:function(c,d){null==a.cosyPopup.elmPopup&&(a.cosyPopup.elmPopup=a("<div></div>").attr("id",
"cosyPopup").css({margin:"0px",padding:"10px",position:"absolute",minWidth:"200px",height:"auto",color:"#333",backgroundColor:"#FFF",visibility:"hidden",zIndex:1E3,opacity:0,boxShadow:"0px 0px 5px #222"}).on("mouseenter",function(){a.cosyPopup.show()}).on("mouseleave",function(){a.cosyPopup.hide()}).appendTo("body"));a(c).attr("old-title",c.title).removeAttr("title").on("mouseenter",function(){a.cosyPopup.show(this,d)}).on("mouseleave",function(){a.cosyPopup.hide(this)})},show:function(c,d){if("object"==
typeof c){var b=a(c);if(!b.is(":hover"))return;""==d&&(d="title");var e;if("href"==d){var f=b.attr("href");if(a.cosyPopup.cache.exist(f))e=a.cosyPopup.cache.get(f);else{b.css("cursor","progress");a.ajax({url:f,type:"GET",dataType:"html"}).done(function(b){a.cosyPopup.cache.set(f,b)}).fail(function(){a.cosyPopup.cache.set(f,"<p><strong>Error occured</strong><br />Unable to load URL: "+f+"</p>")}).always(function(){b.css("cursor","");a.cosyPopup.show(c,d)});return}}else e="title"==d?b.attr("old-title"):
d;a.cosyPopup.elmPopup.html(e);e=a.cosyPopup.posVer;switch(a.cosyPopup.posVer){case "above":b.offset().top<a.cosyPopup.elmPopup.outerHeight(!0)&&(e="below");break;case "below":a(window).height()-b.offset().top-b.outerHeight(!0)<a.cosyPopup.elmPopup.outerHeight(!0)&&(e="above")}var h=a.cosyPopup.posHor;switch(a.cosyPopup.posHor){case "right":a(window).width()-b.offset().left-b.outerWidth(!0)<a.cosyPopup.elmPopup.outerWidth(!0)&&(h="left");break;case "left":b.offset().left<a.cosyPopup.elmPopup.outerWidth(!0)&&
(h="right")}var g={top:"auto",right:"auto",bottom:"auto",left:"auto"};switch(e){case "above":g.bottom=a(window).height()-b.offset().top;break;case "below":g.top=b.offset().top+b.outerHeight(!0)}switch(h){case "right":g.left=b.offset().left;break;case "left":g.right=a(window).width()-b.offset().left-b.outerWidth(!0)}a.cosyPopup.elmPopup.css(g)}a.cosyPopup.isVisible=!0;a.cosyPopup.elmPopup.css("visibility","visible");a.cosyPopup.elmPopup.stop(!0,!1).animate({opacity:1},a.cosyPopup.timeShow)},hide:function(c){a.cosyPopup.isVisible&&
(a.cosyPopup.isVisible=!1,a.cosyPopup.elmPopup.stop(!0,!1).animate({opacity:0},a.cosyPopup.timeHide,function(){a(this).css("visibility","hidden")}))}};a.fn.extend({cosyPopup:function(c){return this.each(function(){a.cosyPopup.init(this,c)})}})})(jQuery);